(this["webpackJsonpcoschedule-challenge-front-end"]=this["webpackJsonpcoschedule-challenge-front-end"]||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(34),s=n.n(a),i=(n(89),n(8)),o=n(13),u=n(7),l=(n(90),n(91),n(1));function j(e){var t,n,c=e.gif,r=e.optionalRating;return"/ratings"===Object(u.g)().pathname?Object(l.jsx)("div",{className:"card",children:Object(l.jsxs)(o.b,{to:"/gif/".concat(c.id,"/rating/").concat(r),children:[Object(l.jsx)("header",{children:c.title}),Object(l.jsx)("img",{src:null===(t=c.images)||void 0===t?void 0:t.preview_gif.url,alt:"gif preview"})]})}):Object(l.jsx)("div",{className:"card",children:Object(l.jsxs)(o.b,{to:"/gif/".concat(c.id),children:[Object(l.jsx)("header",{children:c.title}),Object(l.jsx)("img",{src:null===(n=c.images)||void 0===n?void 0:n.preview_gif.url,alt:"gif preview"})]})})}var d,h=function(e){var t=e.gifs;return Object(l.jsx)("div",{className:"App",children:null===t||void 0===t?void 0:t.map((function(e){return Object(l.jsx)(j,{gif:e})}))})},b=n(5),p=n.n(b),f=n(14),m=n(9);d="https://coschedule-challenge-backend.herokuapp.com";var O="https://api.giphy.com/v1/gifs?api_key=".concat("zoBsDWAU8HorqZ8gpmKb0vqKNb1CsX9H"),g={method:"GET",headers:{Accept:"application/json"}},x={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}},v={method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}};function y(){return(y=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(d+"/gifs?offset=".concat(t),g).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.error(e)}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(O+"&ids=".concat(t),g).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.error(e)}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(f.a)(p.a.mark((function e(t,n){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(d+"/gifs?search=".concat(t,"&offset=").concat(n),g).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.error(e)}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(d+"/comments?gifId=".concat(t),g).then((function(e){return e.json()})).then((function(e){return e}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return I.apply(this,arguments)}function I(){return(I=Object(f.a)(p.a.mark((function e(t,n){var c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={comment:n},e.next=3,fetch(d+"/comments?gifId=".concat(t),Object(m.a)(Object(m.a)({},x),{},{headers:Object(m.a)(Object(m.a)({},x.headers),{},{token:localStorage.getItem("token")}),body:JSON.stringify(c)})).then((function(e){return e.json()})).then((function(e){return e}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(d+"/comment?commentId=".concat(t),Object(m.a)(Object(m.a)({},v),{},{headers:Object(m.a)(Object(m.a)({},x.headers),{},{token:localStorage.getItem("token")})})).then((function(e){return e.json()})).then((function(e){return e}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(d+"/ratings",g).then((function(e){return e.json()})).then((function(e){return e}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(f.a)(p.a.mark((function e(t,n){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(d+"/ratings?gifId=".concat(t,"&rating=").concat(n),Object(m.a)(Object(m.a)({},x),{},{headers:Object(m.a)(Object(m.a)({},x.headers),{},{token:localStorage.getItem("token")})})).then((function(e){return e.json()})).then((function(e){return e}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(f.a)(p.a.mark((function e(t,n){var c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={email:t,password:n},e.next=3,fetch(d+"/login",Object(m.a)(Object(m.a)({},x),{},{body:JSON.stringify(c)})).then((function(e){return e.json()})).then((function(e){return e}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(f.a)(p.a.mark((function e(t,n,c){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={username:t,email:n,password:c},e.next=3,fetch(d+"/register",Object(m.a)(Object(m.a)({},x),{},{body:JSON.stringify(r)})).then((function(e){return e.json()})).then((function(e){return e}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return R.apply(this,arguments)}function R(){return(R=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(d+"/user",Object(m.a)(Object(m.a)({},g),{},{headers:Object(m.a)(Object(m.a)({},g.headers),{},{token:localStorage.getItem("token")})})).then((function(e){return e.json()})).then((function(e){return e}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(99);var T=n(77),W=n.n(T),_=n(142),A=n(145);n(104);function H(e){var t=e.comment,n=e.user,c=e.setModified,r=e.modified,a=function(){(function(e){return P.apply(this,arguments)})(t._id).then((function(e){console.log(e)})),c(!r)};return Object(l.jsx)("div",{className:"commentCardWrapper",children:function(){var e,c,r=Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:t.comment}),Object(l.jsx)("hr",{}),Object(l.jsx)("p",{children:null===(e=t.user)||void 0===e?void 0:e.username}),Object(l.jsx)("p",{children:t.createdDate})]});return console.log(t),n._id&&n.username===(null===(c=t.user)||void 0===c?void 0:c.username)?Object(l.jsxs)("div",{className:"commentCardWrapper",children:[r,Object(l.jsx)("div",{className:"loggedInOptions",children:Object(l.jsx)(_.a,{onClick:a,children:Object(l.jsx)(A.a,{})})})]}):Object(l.jsx)("div",{className:"commentCardWrapper",children:r})}()})}function D(){var e,t=Object(c.useState)([]),n=Object(i.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)([]),o=Object(i.a)(s,2),j=o[0],d=o[1],h=Object(c.useState)(0),b=Object(i.a)(h,2),m=b[0],O=b[1],g=Object(c.useState)(!1),x=Object(i.a)(g,2),v=x[0],y=x[1],w=Object(c.useState)([]),I=Object(i.a)(w,2),P=I[0],C=I[1],F=Object(u.h)(),L=F.id,R=F.ratingParam,T=Object(u.f)();Object(c.useEffect)((function(){(function(e){return k.apply(this,arguments)})(L).then((function(e){a(e.data[0])})),function(e){return S.apply(this,arguments)}(L).then((function(e){d(e)})),O(R?Number(R):m)}),[v,L,m,R]),Object(c.useEffect)((function(){B().then((function(e){e.username?C(e):C([])}))}),[]);var _=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("comment").value,e.next=3,N(L,t).then((function(e){e.message?T.push("/login"):console.log(e)}));case 3:y(!v);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"detailWrapper",children:[Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:"detail",children:[Object(l.jsx)("h1",{children:r.title}),Object(l.jsx)("img",{src:null===(e=r.images)||void 0===e?void 0:e.original.url,alt:"GIF selected"})]})}),Object(l.jsxs)("div",{className:"commentary",children:[Object(l.jsx)("div",{className:"stars",children:Object(l.jsx)(W.a,{rating:m,changeRating:function(e){P._id?(O(e),function(e,t){E.apply(this,arguments)}(r.id,e)):T.push("/login")},starRatedColor:"darkgoldenrod",starHoverColor:"gold",numberOfStars:5,name:"rating"})}),localStorage.getItem("token")?Object(l.jsxs)("div",{className:"commentForm",children:[Object(l.jsx)("textarea",{id:"comment"}),Object(l.jsx)("button",{onClick:_,children:"Comment!"})]}):Object(l.jsx)("p",{className:"notLoggedIn",children:"Please log in to comment on this GIF"}),j.map((function(e){return Object(l.jsx)(H,{comment:e,user:P,setModified:y,modified:v})}))]})]})}var G=n.p+"static/media/giphylogo.685c9731.svg",J=(n(105),n(61)),M=n.n(J),U=n(82),q=n.n(U),K=n(81),z=n.n(K);var X=function(e){var t=e.movePageLeft,n=e.movePageRight,r=e.searchForTerm,a=(e.user,Object(c.useState)([])),s=Object(i.a)(a,2),j=s[0],d=s[1];localStorage.setItem("previousPage",Object(u.g)().pathname);var h=Object(u.f)();Object(c.useEffect)((function(){B().then((function(e){d(e)}))}),[]);var b=function(){localStorage.removeItem("token"),h.push("/")},p="/"===Object(u.g)().pathname?Object(l.jsx)("input",{type:"text",placeholder:"Search",onChange:r}):"",f=(null===j||void 0===j?void 0:j._id)?Object(l.jsx)("li",{children:Object(l.jsx)(o.b,{to:"/ratings",children:"Rated"})}):"";return Object(l.jsxs)("div",{className:"header-container",children:[Object(l.jsxs)("header",{className:"App-header",children:[Object(l.jsx)(M.a,{className:"leftButton",onClick:t,children:Object(l.jsx)(z.a,{})}),Object(l.jsx)("a",{href:"https://developers.giphy.com/",children:Object(l.jsx)("img",{className:"logo",src:G,alt:"GIPHY logo"})}),"GIF Rater",Object(l.jsx)(M.a,{className:"rightButton",onClick:n,children:Object(l.jsx)(q.a,{})}),p]}),Object(l.jsx)("div",{className:"link-bar",children:Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:Object(l.jsx)(o.b,{to:"/",children:"Home"})}),f,Object(l.jsx)("li",{className:"login",children:localStorage.getItem("token")?Object(l.jsx)(o.b,{onClick:b,children:"Logout"}):Object(l.jsx)(o.b,{to:"/login",children:"Login"})})]})})]})};n(129);var Y=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){(function(){return C.apply(this,arguments)})().then((function(e){r(e)}))}),[]),Object(l.jsx)("div",{className:"App",children:n.map((function(e){return Object(l.jsx)(j,{gif:e.gif.data[0],optionalRating:e.rating})}))})};n(72);function Z(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(u.f)(),s=n?Object(l.jsx)("p",{className:"errors",children:n}):"";return Object(l.jsxs)("div",{className:"registrationWrapper",children:[Object(l.jsx)("h1",{children:"Login"}),Object(l.jsxs)("div",{className:"registrationFormWrapper",children:[Object(l.jsxs)("div",{className:"registrationForm",children:[s,Object(l.jsx)("label",{children:"Email:"}),Object(l.jsx)("input",{type:"text",id:"email"}),Object(l.jsx)("label",{children:"Password:"}),Object(l.jsx)("input",{type:"password",id:"password"}),Object(l.jsxs)("div",{className:"buttonBlock",children:[Object(l.jsx)("button",{onClick:function(e){(function(e,t){return F.apply(this,arguments)})(document.getElementById("email").value,document.getElementById("password").value).then((function(e){e.token?(localStorage.setItem("token",e.token),a.push(localStorage.getItem("previousPage")),r("")):e.errors?r("Password or email invalid!\n                    Password should be 8 characters\n                    Email should be email format (example@example.com)"):r(e.msg)}))},children:"Login"}),Object(l.jsx)("button",{onClick:function(){a.push(localStorage.getItem("previousPage"))},children:"Cancel"})]})]}),"Don't have an account? Make one ",Object(l.jsx)(o.b,{to:"/register",children:"here"}),"!"]})]})}function Q(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(u.f)(),s=n?Object(l.jsx)("p",{className:"errors",children:n}):"";return Object(l.jsxs)("div",{className:"registrationWrapper",children:[Object(l.jsx)("h1",{children:"Register"}),Object(l.jsxs)("div",{className:"registrationFormWrapper",children:[Object(l.jsxs)("div",{className:"registrationForm",children:[s,Object(l.jsx)("label",{children:"Username:"}),Object(l.jsx)("input",{type:"text",id:"username"}),Object(l.jsx)("label",{children:"Email:"}),Object(l.jsx)("input",{type:"text",id:"email"}),Object(l.jsx)("label",{children:"Password:"}),Object(l.jsx)("input",{type:"password",id:"password"}),Object(l.jsxs)("div",{className:"buttonBlock",children:[Object(l.jsx)("button",{onClick:function(e){(function(e,t,n){return L.apply(this,arguments)})(document.getElementById("username").value,document.getElementById("email").value,document.getElementById("password").value).then((function(e){e.token?(localStorage.setItem("token",e.token),a.push(localStorage.getItem("previousPage")),r("")):e.errors?(console.log(e.errors),r("Password or email invalid!\n                    Username cannot be empty.\n                    Password should be 8 characters.\n                    Email should be email format (example@example.com).")):r(e.msg)}))},children:"Login"}),Object(l.jsx)("button",{onClick:function(){a.push(localStorage.getItem("previousPage"))},children:"Cancel"})]})]}),"Have an account? Log in ",Object(l.jsx)(o.b,{to:"/login",children:"here"}),"!"]})]})}var V=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(0),s=Object(i.a)(a,2),j=s[0],d=s[1],b=Object(c.useState)(0),p=Object(i.a)(b,2),f=p[0],m=p[1],O=Object(c.useState)(0),g=Object(i.a)(O,2),x=g[0],v=g[1],k=Object(c.useState)(""),S=Object(i.a)(k,2),N=S[0],I=S[1],P=Object(c.useState)(0),C=Object(i.a)(P,2),E=C[0],F=C[1];Object(c.useEffect)((function(){console.log(j),N?function(e,t){return w.apply(this,arguments)}(N,j).then((function(e){r(e.data),m(e.pagination.total_count),v(e.pagination.count)})):function(e){return y.apply(this,arguments)}(j).then((function(e){r(e.data),m(e.pagination.total_count),v(e.pagination.count)}))}),[N,j]);var L=function(e){I(e.target.value),d(0),F(0)},B=function(){j-x>=0?(d(j-x),F(E-1)):(d(0),F(0))},R=function(){j+x<=f?d(j+x):(d(f-1),F(j/x))};return Object(l.jsx)(o.a,{children:Object(l.jsxs)(u.c,{children:[Object(l.jsx)(u.a,{path:"/register",children:Object(l.jsx)(Q,{})}),Object(l.jsx)(u.a,{path:"/login",children:Object(l.jsx)(Z,{})}),Object(l.jsxs)(u.a,{path:"/ratings",children:[Object(l.jsx)(X,{movePageLeft:B,movePageRight:R,searchForTerm:L}),Object(l.jsx)(Y,{})]}),Object(l.jsxs)(u.a,{path:"/gif/:id/rating/:ratingParam",children:[Object(l.jsx)(X,{movePageLeft:B,movePageRight:R,searchForTerm:L}),Object(l.jsx)(D,{})]}),Object(l.jsxs)(u.a,{path:"/gif/:id",children:[Object(l.jsx)(X,{movePageLeft:B,movePageRight:R,searchForTerm:L}),Object(l.jsx)(D,{})]}),Object(l.jsxs)(u.a,{path:"/",children:[Object(l.jsx)(X,{movePageLeft:B,movePageRight:R,searchForTerm:L}),Object(l.jsx)(h,{gifs:n})]})]})})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,146)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(V,{})}),document.getElementById("root")),$()},72:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},99:function(e,t,n){}},[[130,1,2]]]);
//# sourceMappingURL=main.adbcbd3b.chunk.js.map